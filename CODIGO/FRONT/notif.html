<!DOCTYPE html>
<html>
<head>
  <title>Mi página web</title>
</head>
<body>
  <!-- Contenido de tu página web -->
  <h1 id="mensaje" style="display: block;"></h1>
  <button onclick="mostrarNotificacion()">Enviar notificación</button>

  <script>
    function solicitar() {
      Notification.requestPermission().then(resultado => {
        document.getElementById('mensaje').innerHTML = resultado;
        document.getElementById('mensaje').style.display = 'block';
      });
    }

    function mostrarNotificacion() {
      if (!('Notification' in window)) {
        document.getElementById('mensaje').innerHTML = 'Tu navegador no soporta notificaciones';
        document.getElementById('mensaje').style.display = 'block';
      }
      if (Notification.permission === 'default') {
        solicitar();
      } else
      if (Notification.permission === 'granted') {
        const notificacion = new Notification('Esta es la notificación', {
          icon: '/static/images/favicon.png',
          body: 'Probando'
        });

        notificacion.onclick = function() {
          window.open('http://google.com');
        };
      } else if (Notification.permission === 'denied') {
        document.getElementById('mensaje').innerHTML = 'Permiso de notificación denegado';
        document.getElementById('mensaje').style.display = 'block';
      } else {
        solicitar();
      }
    }
  </script>
</body>
</html>
